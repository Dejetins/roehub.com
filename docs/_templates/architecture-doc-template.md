# Шаблон архитектурного документа

Используйте этот шаблон для новых документов в `docs/architecture/**`; сразу после `# H1` оставляйте краткое описание в одной строке.

## Быстрые правила

- Имя файла: `kebab-case`, версия в суффиксе (`-v1`, `-v2`) при изменении контракта.
- В начале документа: один `# H1` и одна строка описания.
- Scope и non-goals должны быть явно зафиксированы.
- Все ключевые решения должны ссылаться на конкретные файлы/доки.
- Для команд используйте воспроизводимые команды из корня репозитория.

## Чеклист перед PR

- [ ] Есть `# H1` и короткое описание (попадает в индекс `docs/architecture/README.md`).
- [ ] Явно описаны `Цель`, `Scope`, `Non-goals`, инварианты и риски.
- [ ] Есть ссылки на связанные файлы (`src/...`, `apps/...`, `configs/...`, `docs/...`).
- [ ] Добавлены проверки/команды в секции `Как проверить`.
- [ ] Документ добавлен в `docs/**` и индекс обновлён командой `python -m tools.docs.generate_docs_index`.

## Готовый каркас (копируйте блок ниже)

```md
# <Название документа>

<Короткое описание в одной строке: что фиксирует документ и зачем он нужен.>

## Цель

<Какая пользовательская/инженерная цель закрывается этим документом.>

## Контекст

<Краткий контекст: текущая проблема, ограничения, предпосылки.>

## Scope

<Что входит в реализацию/архитектурное решение.>

## Non-goals

<Что явно не входит в этот документ/этап.>

## Ключевые решения

### 1) <Решение>

<Описание решения и причины выбора.>

Последствия:
- <Плюс/ограничение 1>
- <Плюс/ограничение 2>

### 2) <Решение>

<Описание решения и причины выбора.>

## Контракты и инварианты

- <Инвариант 1>
- <Инвариант 2>
- <Инвариант 3>

## Связанные файлы

- `<путь-к-файлу-1>` — <роль файла>
- `<путь-к-файлу-2>` — <роль файла>
- `<путь-к-документу>` — <связанный документ/спецификация>

## Как проверить

```bash
# пример, запускать из корня репозитория
ruff check .
pyright
pytest -q
```

## Риски и открытые вопросы

- Риск: <описание риска и влияние>
- Вопрос: <что нужно уточнить и у кого>
```
